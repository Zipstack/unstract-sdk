(unstract-sdk) *[fix/display-whisper-hash-on-failures][~/zipstuff/unstract-sdk]$ pre-commit run mypy                                                  13:49:51
[WARNING] Unstaged files detected.
[INFO] Stashing unstaged files to /home/chandru/.cache/pre-commit/patch1744359601-330795.
mypy.....................................................................Failed
- hook id: mypy
- exit code: 1

src/unstract/sdk/platform.py:3:1: error: Library stubs not installed for
"requests"  [import]
    import requests
    ^
src/unstract/sdk/ocr.py:4:1: error: Library stubs not installed for
"deprecated"  [import]
    from deprecated import deprecated
    ^
src/unstract/sdk/ocr.py:27:5: error: Function is missing a type annotation 
[no-untyped-def]
        def _initialise(self, adapter_instance_id):
        ^
src/unstract/sdk/ocr.py:29:13: error: Attribute "_ocr_instance" already defined
on line 24  [no-redef]
                self._ocr_instance: OCRAdapter = self._get_ocr()
                ^
src/unstract/sdk/ocr.py:31:5: error: Missing return statement  [return]
        def _get_ocr(self) -> Optional[OCRAdapter]:
        ^
src/unstract/sdk/ocr.py:58:9: error: Returning Any from function declared to
return "str"  [no-any-return]
            return self._ocr_instance.process(input_file_path, output_file...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/unstract/sdk/ocr.py:64:13: error: Attribute "_ocr_instance" already defined
on line 24  [no-redef]
                self._ocr_instance: OCRAdapter = self._get_ocr()
                ^
src/unstract/sdk/exceptions.py:57:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, message: str = "", **kwargs):
        ^
src/unstract/sdk/cache.py:3:1: error: Library stubs not installed for
"requests"  [import]
    import requests
    ^
src/unstract/sdk/scripts/tool_gen.py:8:1: error: Function is missing a type
annotation  [no-untyped-def]
    def new_tool(args):
    ^
src/unstract/sdk/scripts/tool_gen.py:30:19: error: Argument 1 to "Path" has
incompatible type "Traversable"; expected "Union[str, PathLike[str]]" 
[arg-type]
        source = Path(files("unstract.sdk").joinpath("static/tool_template...
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/unstract/sdk/prompt.py:4:1: error: Library stubs not installed for
"requests"  [import]
    import requests
    ^
src/unstract/sdk/prompt.py:215:13: error: Returning Any from function declared
to return "Optional[Dict[str, Any]]"  [no-any-return]
                return response.json()
                ^~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/adapter.py:4:1: error: Library stubs not installed for
"requests"  [import]
    import requests
    ^
src/unstract/sdk/adapter.py:5:1: error: Library stubs not installed for
"requests.exceptions"  [import]
    from requests.exceptions import ConnectionError, HTTPError
    ^
src/unstract/sdk/adapter.py:113:13: error: Returning Any from function declared
to return "Optional[Dict[str, Any]]"  [no-any-return]
                return adapter_metadata
                ^~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/utils/tool_utils.py:73:9: error: Returning Any from function
declared to return "str"  [no-any-return]
            return fs.get_hash_from_file(path=file_path)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/utils/tool_utils.py:162:9: error: Returning Any from function
declared to return "int"  [no-any-return]
            return file_length
            ^~~~~~~~~~~~~~~~~~
src/unstract/sdk/utils/tool_utils.py:244:13: error: Returning Any from function
declared to return "Dict[str, Any]"  [no-any-return]
                return json.loads(credentials)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/utils/indexing_utils.py:54:9: error: Returning Any from
function declared to return "str"  [no-any-return]
            return hashed_index_key
            ^~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/utils/common_utils.py:72:1: error: Function is missing a type
annotation  [no-untyped-def]
    def log_elapsed(operation):
    ^
src/unstract/sdk/utils/common_utils.py:79:5: error: Function is missing a type
annotation  [no-untyped-def]
        def decorator(func):
        ^
src/unstract/sdk/utils/common_utils.py:81:9: error: Function is missing a type
annotation  [no-untyped-def]
            def wrapper(*args, **kwargs):
            ^
src/unstract/sdk/utils/common_utils.py:96:1: error: Function is missing a type
annotation  [no-untyped-def]
    def capture_metrics(func):
    ^
src/unstract/sdk/utils/common_utils.py:100:5: error: Function is missing a type
annotation  [no-untyped-def]
        def wrapper(self, *args, **kwargs):
        ^
src/unstract/sdk/tool/validator.py:150:22: error: Item "None" of
"Optional[Match[str]]" has no attribute "groups"  [union-attr]
            size, unit = size_match.groups()
                         ^~~~~~~~~~~~~~~~~
src/unstract/sdk/tool/stream.py:7:1: error: Library stubs not installed for
"deprecated"  [import]
    from deprecated import deprecated
    ^
src/unstract/sdk/tool/stream.py:7:1: note: Hint: "python3 -m pip install types-Deprecated"
src/unstract/sdk/tool/stream.py:23:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def __init__(self, log_level: LogLevel = LogLevel.INFO, **kwargs) ...
        ^
src/unstract/sdk/tool/stream.py:40:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def is_exec_by_tool(self):
        ^
src/unstract/sdk/tool/stream.py:127:16: error: Incompatible return value type
(got "Optional[str]", expected "str")  [return-value]
            return env_value
                   ^~~~~~~~~
src/unstract/sdk/tool/mixin.py:26:9: error: Returning Any from function
declared to return "Dict[str, Any]"  [no-any-return]
            return ToolUtils.load_json(spec_file, fs=fs)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/tool/mixin.py:41:9: error: Returning Any from function
declared to return "Dict[str, Any]"  [no-any-return]
            return ToolUtils.load_json(properties_file, fs)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/tool/mixin.py:58:13: error: Returning Any from function
declared to return "Dict[str, Any]"  [no-any-return]
                return ToolUtils.load_json(variables_file, fs)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/tool/mixin.py:78:9: error: Returning Any from function
declared to return "str"  [no-any-return]
            return icon
            ^~~~~~~~~~~
src/unstract/sdk/tool/executor.py:51:42: error: Argument 1 to "loads" has
incompatible type "Optional[Any]"; expected "Union[str, bytes, bytearray]" 
[arg-type]
            settings: dict[str, Any] = loads(args.settings)
                                             ^~~~~~~~~~~~~
src/unstract/sdk/tool/base.py:42:9: error: Need type annotation for "tags"
(hint: "tags: List[<type>] = ...")  [var-annotated]
            self.tags = []
            ^~~~~~~~~
src/unstract/sdk/tool/base.py:45:9: error: Need type annotation for
"_exec_metadata" (hint: "_exec_metadata: Dict[<type>, <type>] = ...") 
[var-annotated]
            self._exec_metadata = {}
            ^~~~~~~~~~~~~~~~~~~
src/unstract/sdk/tool/base.py:88:32: error: Incompatible types in assignment
(expression has type "Optional[Any]", variable has type "str")  [assignment]
                tool.workflow_id = tool._exec_metadata.get(MetadataKey.WOR...
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/unstract/sdk/tool/base.py:95:27: error: Incompatible types in assignment
(expression has type "Optional[Any]", variable has type "str")  [assignment]
                tool.org_id = tool._exec_metadata.get(MetadataKey.ORG_ID)
                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/tool/base.py:131:21: error: Unsupported left operand type for
/ ("None")  [operator]
            file_path = base_path / file_to_get
                        ^~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/tool/base.py:131:21: note: Left operand is of type "Optional[Path]"
src/unstract/sdk/tool/base.py:132:30: error: Item "None" of "Optional[Any]" has
no attribute "exists"  [union-attr]
            if raise_err and not self.workflow_filestorage.exists(path=fil...
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/permanent.py:46:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def _copy_on_read(self, path: str, legacy_storage_path: str):
        ^
src/unstract/sdk/file_storage/permanent.py:101:13: error: Returning Any from
function declared to return "Union[bytes, str]"  [no-any-return]
                return super().read(path, mode, encoding, seek_position, l...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/unstract/sdk/file_storage/interface.py:43:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def mkdir(self, path: str, create_parents: bool):
        ^
src/unstract/sdk/file_storage/interface.py:55:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def rm(self, path: str, recursive: bool = True):
        ^
src/unstract/sdk/file_storage/interface.py:59:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def cp(
        ^
src/unstract/sdk/file_storage/interface.py:85:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def download(self, from_path: str, to_path: str):
        ^
src/unstract/sdk/file_storage/interface.py:97:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def json_dump(
        ^
src/unstract/sdk/file_storage/interface.py:106:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def yaml_dump(
        ^
src/unstract/sdk/file_storage/interface.py:130:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def walk(self, path: str):
        ^
src/unstract/sdk/file_storage/impl.py:10:1: error: Library stubs not installed
for "yaml"  [import]
    import yaml
    ^
src/unstract/sdk/file_storage/impl.py:10:1: note: Hint: "python3 -m pip install types-PyYAML"
src/unstract/sdk/file_storage/impl.py:57:13: error: Returning Any from function
declared to return "Union[bytes, str]"  [no-any-return]
                return file_handle.read(length)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:82:17: error: Returning Any from function
declared to return "int"  [no-any-return]
                    return file_handle.write(data)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:107:13: error: Returning Any from
function declared to return "int"  [no-any-return]
                return file_handle.seek(location, position)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:109:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def mkdir(self, path: str, create_parents: bool = True):
        ^
src/unstract/sdk/file_storage/impl.py:135:13: error: Returning Any from
function declared to return "bool"  [no-any-return]
                return self.fs.exists(path)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:149:9: error: Returning Any from function
declared to return "List[str]"  [no-any-return]
            return self.fs.ls(path)
            ^~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:152:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def rm(self, path: str, recursive: bool = True):
        ^
src/unstract/sdk/file_storage/impl.py:166:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def cp(
        ^
src/unstract/sdk/file_storage/impl.py:197:9: error: Returning Any from function
declared to return "int"  [no-any-return]
            return file_info["size"]
            ^~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:249:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def download(self, from_path: str, to_path: str):
        ^
src/unstract/sdk/file_storage/impl.py:265:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def upload(self, from_path: str, to_path: str):
        ^
src/unstract/sdk/file_storage/impl.py:293:13: error: Returning Any from
function declared to return "List[str]"  [no-any-return]
                return self.fs.glob(path)
                ^~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:318:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def json_dump(
        ^
src/unstract/sdk/file_storage/impl.py:322: error: Unused "type: ignore" comment
            **kwargs: dict[Any, Any],  # type: ignore
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:337:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def yaml_dump(
        ^
src/unstract/sdk/file_storage/impl.py:341: error: Unused "type: ignore" comment
            **kwargs: dict[Any, Any],  # type: ignore
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:352: error: Unused "type: ignore" comment
                    yaml.dump(data=data, stream=f, **kwargs)  # type: igno...
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/file_storage/impl.py:399:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def walk(self, path: str, max_depth=None, topdown=True):
        ^
src/unstract/sdk/file_storage/impl.py:399:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def walk(self, path: str, max_depth=None, topdown=True):
        ^
src/unstract/sdk/file_storage/helper.py:73:1: error: Function is missing a type
annotation  [no-untyped-def]
    def skip_local_cache(func):
    ^
src/unstract/sdk/file_storage/helper.py:84:5: error: Function is missing a type
annotation  [no-untyped-def]
        def wrapper(*args, **kwargs):
        ^
src/unstract/sdk/file_storage/helper.py:95:1: error: Function is missing a type
annotation  [no-untyped-def]
    def _handle_file_not_found(func, *args, **kwargs):
    ^
src/unstract/sdk/adapters/utils.py:7:1: error: Library stubs not installed for
"requests"  [import]
    from requests import Response
    ^
src/unstract/sdk/adapters/utils.py:8:1: error: Library stubs not installed for
"requests.exceptions"  [import]
    from requests.exceptions import RequestException
    ^
src/unstract/sdk/adapters/utils.py:36: error: Unused "type: ignore" comment
            err_response: Response = err.response  # type: ignore
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/adapters/x2text/helper.py:4:1: error: Library stubs not
installed for "requests"  [import]
    import requests
    ^
src/unstract/sdk/adapters/x2text/helper.py:6:1: error: Library stubs not
installed for "requests.exceptions"  [import]
    from requests.exceptions import ConnectionError, HTTPError, Timeout
    ^
src/unstract/sdk/adapters/x2text/no_op/src/no_op_x2text.py:49:20: error:
Argument 1 to "sleep" has incompatible type "Optional[Any]"; expected "float" 
[arg-type]
            time.sleep(self.config.get("wait_time"))
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/adapters/x2text/no_op/src/no_op_x2text.py:57:20: error:
Argument 1 to "sleep" has incompatible type "Optional[Any]"; expected "float" 
[arg-type]
            time.sleep(self.config.get("wait_time"))
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/adapters/x2text/llm_whisperer_v2/src/llm_whisperer_v2.py:5:1: error:
Library stubs not installed for "requests"  [import]
    import requests
    ^
src/unstract/sdk/adapters/x2text/llm_whisperer_v2/src/helper.py:7:1: error:
Library stubs not installed for "requests"  [import]
    import requests
    ^
src/unstract/sdk/adapters/x2text/llm_whisperer_v2/src/helper.py:9:1: error:
Library stubs not installed for "requests.exceptions"  [import]
    from requests.exceptions import ConnectionError, HTTPError, Timeout
    ^
src/unstract/sdk/adapters/x2text/llm_whisperer_v2/src/helper.py:297:9: error:
Returning Any from function declared to return "Dict[Any, Any]"  [no-any-return]
            return retrieve_response
            ^~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/adapters/x2text/llm_whisperer/src/llm_whisperer.py:8:1: error:
Library stubs not installed for "requests"  [import]
    import requests
    ^
src/unstract/sdk/adapters/x2text/llm_whisperer/src/llm_whisperer.py:10:1: error:
Library stubs not installed for "requests.exceptions"  [import]
    from requests.exceptions import ConnectionError, HTTPError, Timeout
    ^
src/unstract/sdk/adapters/x2text/llm_whisperer/src/llm_whisperer.py:299:13: error:
Returning Any from function declared to return "str"  [no-any-return]
                return retrieve_response.json()
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/adapters/x2text/llm_whisperer/src/llm_whisperer.py:341:27: error:
Incompatible types in assignment (expression has type "str", variable has type
"Dict[Any, Any]")  [assignment]
                output_json = self._extract_async(whisper_hash=whisper_has...
                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_cache.py:22:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def setUpClass(cls):
        ^
tests/test_cache.py:22:5: note: Use "-> None" if function does not return a value
tests/test_cache.py:23:9: error: "Type[UnstractToolCacheTest]" has no attribute
"tool"  [attr-defined]
            cls.tool = cls.MockTool()
            ^~~~~~~~
tests/test_cache.py:25:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def test_set(self):
        ^
tests/test_cache.py:25:5: note: Use "-> None" if function does not return a value
tests/test_cache.py:27:18: error: "UnstractToolCacheTest" has no attribute
"tool"  [attr-defined]
                tool=self.tool, platform_host="http://localhost", platform...
                     ^~~~~~~~~
tests/test_cache.py:32:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def test_get(self):
        ^
tests/test_cache.py:32:5: note: Use "-> None" if function does not return a value
tests/test_cache.py:34:18: error: "UnstractToolCacheTest" has no attribute
"tool"  [attr-defined]
                tool=self.tool, platform_host="http://localhost", platform...
                     ^~~~~~~~~
tests/test_cache.py:40:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def test_delete(self):
        ^
tests/test_cache.py:40:5: note: Use "-> None" if function does not return a value
tests/test_cache.py:42:18: error: "UnstractToolCacheTest" has no attribute
"tool"  [attr-defined]
                tool=self.tool, platform_host="http://localhost", platform...
                     ^~~~~~~~~
tests/tool/test_static.py:12:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def setUpClass(cls):
        ^
tests/tool/test_static.py:12:5: note: Use "-> None" if function does not return a value
tests/tool/test_static.py:13:9: error: "Type[UnstractSDKToolsStaticTest]" has
no attribute "tool"  [attr-defined]
            cls.tool = StreamMixin()
            ^~~~~~~~
tests/tool/test_static.py:15:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_spec(self):
        ^
tests/tool/test_static.py:15:5: note: Use "-> None" if function does not return a value
tests/tool/test_static.py:21:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_stream_spec(self):
        ^
tests/tool/test_static.py:21:5: note: Use "-> None" if function does not return a value
tests/tool/test_static.py:27:13: error: "UnstractSDKToolsStaticTest" has no
attribute "tool"  [attr-defined]
                self.tool.stream_spec(spec)
                ^~~~~~~~~
tests/tool/test_static.py:32:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_properties(self):
        ^
tests/tool/test_static.py:32:5: note: Use "-> None" if function does not return a value
tests/tool/test_static.py:40:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_stream_properties(self):
        ^
tests/tool/test_static.py:40:5: note: Use "-> None" if function does not return a value
tests/tool/test_static.py:48:13: error: "UnstractSDKToolsStaticTest" has no
attribute "tool"  [attr-defined]
                self.tool.stream_properties(properties)
                ^~~~~~~~~
tests/tool/test_static.py:53:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_icon(self):
        ^
tests/tool/test_static.py:53:5: note: Use "-> None" if function does not return a value
tests/tool/test_static.py:57:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_stream_icon(self):
        ^
tests/tool/test_static.py:57:5: note: Use "-> None" if function does not return a value
tests/tool/test_static.py:61:13: error: "UnstractSDKToolsStaticTest" has no
attribute "tool"  [attr-defined]
                self.tool.stream_icon(icon)
                ^~~~~~~~~
tests/tool/test_entrypoint.py:28:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def setUpClass(cls):
        ^
tests/tool/test_entrypoint.py:28:5: note: Use "-> None" if function does not return a value
tests/tool/test_entrypoint.py:29:9: error:
"Type[UnstractSDKToolsEntrypointTest]" has no attribute "tool"  [attr-defined]
            cls.tool = cls.MockTool(log_level=LogLevel.DEBUG)
            ^~~~~~~~
tests/tool/test_entrypoint.py:34:40: error: "UnstractSDKToolsEntrypointTest"
has no attribute "tool"  [attr-defined]
                ToolEntrypoint.launch(tool=self.tool, args=args)
                                           ^~~~~~~~~
tests/tool/test_entrypoint.py:37:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_spec(self):
        ^
tests/tool/test_entrypoint.py:37:5: note: Use "-> None" if function does not return a value
tests/tool/test_entrypoint.py:49:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_properties(self):
        ^
tests/tool/test_entrypoint.py:49:5: note: Use "-> None" if function does not return a value
tests/tool/test_entrypoint.py:61:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_variables(self):
        ^
tests/tool/test_entrypoint.py:61:5: note: Use "-> None" if function does not return a value
tests/tool/test_entrypoint.py:73:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_run(self):
        ^
tests/tool/test_entrypoint.py:73:5: note: Use "-> None" if function does not return a value
tests/tool/test_entrypoint.py:89:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def test_run_debug(self):
        ^
tests/tool/test_entrypoint.py:89:5: note: Use "-> None" if function does not return a value
tests/test_x2text.py:19:25: error: Argument 1 to "loads" has incompatible type
"Optional[str]"; expected "Union[str, bytes, bytearray]"  [arg-type]
        values = json.loads(os.environ.get(env_key))
                            ^~~~~~~~~~~~~~~~~~~~~~~
tests/test_x2text.py:20:5: error: Returning Any from function declared to
return "List[str]"  [no-any-return]
        return values
        ^~~~~~~~~~~~~
tests/test_x2text.py:25:12: error: Incompatible return value type (got
"Optional[str]", expected "str")  [return-value]
        return value
               ^~~~~
tests/test_x2text.py:40:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def setUpClass(cls):
        ^
tests/test_x2text.py:40:5: note: Use "-> None" if function does not return a value
tests/test_x2text.py:41:9: error: "Type[ToolX2TextTest]" has no attribute
"tool"  [attr-defined]
            cls.tool = cls.MockTool()
            ^~~~~~~~
tests/test_x2text.py:44:5: error: Function is missing a type annotation 
[no-untyped-def]
        def test_get_x2text(self, adapter_instance_id):
        ^
tests/test_x2text.py:45:35: error: "ToolX2TextTest" has no attribute "tool" 
[attr-defined]
            tool_x2text = X2Text(tool=self.tool)
                                      ^~~~~~~~~
tests/test_ocr.py:19:25: error: Argument 1 to "loads" has incompatible type
"Optional[str]"; expected "Union[str, bytes, bytearray]"  [arg-type]
        values = json.loads(os.environ.get(env_key))
                            ^~~~~~~~~~~~~~~~~~~~~~~
tests/test_ocr.py:20:5: error: Returning Any from function declared to return
"List[str]"  [no-any-return]
        return values
        ^~~~~~~~~~~~~
tests/test_ocr.py:25:12: error: Incompatible return value type (got
"Optional[str]", expected "str")  [return-value]
        return value
               ^~~~~
tests/test_ocr.py:39:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def setUpClass(cls):
        ^
tests/test_ocr.py:39:5: note: Use "-> None" if function does not return a value
tests/test_ocr.py:40:9: error: "Type[ToolOCRTest]" has no attribute "tool" 
[attr-defined]
            cls.tool = cls.MockTool()
            ^~~~~~~~
tests/test_ocr.py:43:5: error: Function is missing a type annotation 
[no-untyped-def]
        def test_get_ocr(self, adapter_instance_id):
        ^
tests/test_ocr.py:44:29: error: "ToolOCRTest" has no attribute "tool" 
[attr-defined]
            tool_ocr = OCR(tool=self.tool)
                                ^~~~~~~~~
tests/test_llm.py:20:30: error: Argument 1 to "loads" has incompatible type
"Optional[str]"; expected "Union[str, bytes, bytearray]"  [arg-type]
        test_values = json.loads(os.environ.get(env_key))
                                 ^~~~~~~~~~~~~~~~~~~~~~~
tests/test_llm.py:21:5: error: Returning Any from function declared to return
"List[str]"  [no-any-return]
        return test_values
        ^~~~~~~~~~~~~~~~~~
tests/test_llm.py:36:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def setUpClass(cls):
        ^
tests/test_llm.py:36:5: note: Use "-> None" if function does not return a value
tests/test_llm.py:37:9: error: "Type[ToolLLMTest]" has no attribute "tool" 
[attr-defined]
            cls.tool = cls.MockTool()
            ^~~~~~~~
tests/test_llm.py:60:5: error: Function is missing a type annotation 
[no-untyped-def]
        def test_get_llm(self, adapter_instance_id):
        ^
tests/test_llm.py:61:33: error: "ToolLLMTest" has no attribute "tool" 
[attr-defined]
            tool_llm = ToolLLM(tool=self.tool)
                                    ^~~~~~~~~
tests/test_index.py:20:30: error: Argument 1 to "loads" has incompatible type
"Optional[str]"; expected "Union[str, bytes, bytearray]"  [arg-type]
        test_values = json.loads(os.environ.get(env_key))
                                 ^~~~~~~~~~~~~~~~~~~~~~~
tests/test_index.py:21:5: error: Returning Any from function declared to return
"List[str]"  [no-any-return]
        return test_values
        ^~~~~~~~~~~~~~~~~~
tests/test_index.py:36:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def setUpClass(cls):
        ^
tests/test_index.py:36:5: note: Use "-> None" if function does not return a value
tests/test_index.py:37:9: error: "Type[ToolLLMTest]" has no attribute "tool" 
[attr-defined]
            cls.tool = cls.MockTool()
            ^~~~~~~~
tests/test_index.py:45:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def test_generate_file_id(self):
        ^
tests/test_index.py:45:5: note: Use "-> None" if function does not return a value
tests/test_index.py:47:28: error: "ToolLLMTest" has no attribute "tool" 
[attr-defined]
            index = Index(tool=self.tool)
                               ^~~~~~~~~
tests/test_index.py:97:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def test_generate_index_key(
        ^
tests/test_index.py:108:28: error: "ToolLLMTest" has no attribute "tool" 
[attr-defined]
            index = Index(tool=self.tool)
                               ^~~~~~~~~
tests/test_fs_permanent.py:29:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def permanent_file_storage(provider: FileStorageProvider):
    ^
tests/test_fs_permanent.py:64:1: error: Function is missing a type annotation 
[no-untyped-def]
    def test_permanent_fs_copy_on_read(file_storage, file_read_path, read_...
    ^
tests/test_fs_permanent.py:104:1: error: Function is missing a type annotation 
[no-untyped-def]
    def test_permanent_fs_copy_on_read_with_legacy_storage(
    ^
tests/test_fs_permanent.py:138:1: error: Function is missing a type annotation 
[no-untyped-def]
    def test_permanent_fs_copy(
    ^
tests/test_fs_permanent.py:176:1: error: Function is missing a type annotation 
[no-untyped-def]
    def test_permanent_fs_download(file_storage, from_path, read_mode, to_...
    ^
tests/test_fs_permanent.py:189:1: error: Function is missing a type annotation 
[no-untyped-def]
    def test_permanent_supported_file_storage_mode(provider):
    ^
tests/test_file_storage.py:39:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def file_storage(provider: FileStorageProvider):
    ^
tests/test_file_storage.py:66:29: error: Argument 1 to "getsize" has
incompatible type "Optional[str]"; expected
"Union[int, Union[str, bytes, PathLike[str], PathLike[bytes]]]"  [arg-type]
                os.path.getsize(TEST_CONSTANTS.READ_PDF_FILE),
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:80:29: error: Argument 1 to "getsize" has
incompatible type "Optional[str]"; expected
"Union[int, Union[str, bytes, PathLike[str], PathLike[bytes]]]"  [arg-type]
                os.path.getsize(TEST_CONSTANTS.READ_TEXT_FILE),
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:94:29: error: Argument 1 to "getsize" has
incompatible type "Optional[str]"; expected
"Union[int, Union[str, bytes, PathLike[str], PathLike[bytes]]]"  [arg-type]
                os.path.getsize(TEST_CONSTANTS.READ_TEXT_FILE),
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:101:29: error: Argument 1 to "getsize" has
incompatible type "Optional[str]"; expected
"Union[int, Union[str, bytes, PathLike[str], PathLike[bytes]]]"  [arg-type]
                os.path.getsize(TEST_CONSTANTS.READ_TEXT_FILE),
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:108:29: error: Argument 1 to "getsize" has
incompatible type "Optional[str]"; expected
"Union[int, Union[str, bytes, PathLike[str], PathLike[bytes]]]"  [arg-type]
                os.path.getsize(TEST_CONSTANTS.READ_TEXT_FILE),
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:112:1: error: Function is missing a type annotation 
[no-untyped-def]
    def test_file_read(file_storage, path, mode, read_length, expected_rea...
    ^
tests/test_file_storage.py:128:1: error: Function is missing a type annotation 
[no-untyped-def]
    def test_file_read_exception(file_storage, path, mode, read_length):
    ^
tests/test_file_storage.py:145:29: error: Argument 1 to "getsize" has
incompatible type "Optional[str]"; expected
"Union[int, Union[str, bytes, PathLike[str], PathLike[bytes]]]"  [arg-type]
                os.path.getsize(TEST_CONSTANTS.READ_PDF_FILE),
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:175:29: error: Argument 1 to "getsize" has
incompatible type "Optional[str]"; expected
"Union[int, Union[str, bytes, PathLike[str], PathLike[bytes]]]"  [arg-type]
                os.path.getsize(TEST_CONSTANTS.READ_PDF_FILE),
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:185:29: error: Argument 1 to "getsize" has
incompatible type "Optional[str]"; expected
"Union[int, Union[str, bytes, PathLike[str], PathLike[bytes]]]"  [arg-type]
                os.path.getsize(TEST_CONSTANTS.READ_TEXT_FILE),
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:205:17: error: Argument 1 to "len" has incompatible
type "Optional[str]"; expected "Sized"  [arg-type]
                len(TEST_CONSTANTS.TEXT_CONTENT),
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:211:13: error: Item "None" of "Optional[str]" has no
attribute "encode"  [union-attr]
                TEST_CONSTANTS.TEXT_CONTENT.encode(),
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:215:17: error: Item "None" of "Optional[str]" has no
attribute "encode"  [union-attr]
                len(TEST_CONSTANTS.TEXT_CONTENT.encode()),
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
tests/test_file_storage.py:225:29: note: (Skipping most remaining errors due to unresolved imports or missing stubs; fix these first)
tests/test_file_storage.py:299:1: error: Function is missing a type annotation 
[no-untyped-def]
    def test_file_write(
    ^
src/unstract/sdk/x2txt.py:6:1: error: Library stubs not installed for
"deprecated"  [import]
    from deprecated import deprecated
    ^
src/unstract/sdk/adapters/ocr/google_document_ai/src/google_document_ai.py:7:1: error:
Library stubs not installed for "requests"  [import]
    import requests
    ^
src/unstract/sdk/adapters/ocr/google_document_ai/src/google_document_ai.py:7:1: note: Hint: "python3 -m pip install types-requests"
src/unstract/sdk/adapters/ocr/google_document_ai/src/google_document_ai.py:7:1: note: (or run "mypy --install-types" to install all missing stub packages)
src/unstract/sdk/adapters/ocr/google_document_ai/src/google_document_ai.py:7:1: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
src/unstract/sdk/adapters/ocr/google_document_ai/src/google_document_ai.py:86: error:
Unused "type: ignore" comment
            )  # type: ignore
            ^~~~~~~~~~~~~~~~
src/unstract/sdk/adapters/ocr/google_document_ai/src/google_document_ai.py:87: error:
Unused "type: ignore" comment
            credentials.refresh(google_requests.Request())  # type: ignore
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/unstract/sdk/vector_db.py:5:1: error: Library stubs not installed for
"deprecated"  [import]
    from deprecated import deprecated
    ^
src/unstract/sdk/llm.py:5:1: error: Library stubs not installed for
"deprecated"  [import]
    from deprecated import deprecated
    ^
src/unstract/sdk/audit.py:3:1: error: Library stubs not installed for
"requests"  [import]
    import requests
    ^
src/unstract/sdk/index.py:5:1: error: Library stubs not installed for
"deprecated"  [import]
    from deprecated import deprecated
    ^
src/unstract/sdk/embedding.py:3:1: error: Library stubs not installed for
"deprecated"  [import]
    from deprecated import deprecated
    ^
src/unstract/sdk/utils/callback_manager.py:5:1: error: Library stubs not
installed for "deprecated"  [import]
    from deprecated import deprecated
    ^
src/unstract/sdk/adapters/embedding/vertex_ai/src/vertex_ai.py:60: error:
Unused "type: ignore" comment
                )  # type: ignore
                ^~~~~~~~~~~~~~~~
src/unstract/sdk/adapters/llm/vertex_ai/src/vertex_ai.py:94: error: Unused
"type: ignore" comment
            )  # type: ignore
            ^~~~~~~~~~~~~~~~
src/unstract/sdk/adapters/llm/vertex_ai/src/vertex_ai.py:95: error: Unused
"type: ignore" comment
            credentials.refresh(google_requests.Request())  # type: ignore
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Found 177 errors in 44 files (checked 167 source files)

[INFO] Restored changes from /home/chandru/.cache/pre-commit/patch1744359601-330795.
(unstract-sdk) *[fix/display-whisper-hash-on-failures][~/zipstuff/unstract-sdk]$                                                                      13:54:03
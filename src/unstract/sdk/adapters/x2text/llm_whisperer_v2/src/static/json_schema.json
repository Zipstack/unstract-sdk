{
  "title": "LLM Whisperer X2Text v2",
  "type": "object",
  "required": [
    "adapter_name",
    "unstract_key",
    "url"
  ],
  "properties": {
    "adapter_name": {
      "type": "string",
      "title": "Name",
      "default": "llm-whisperer-v2",
      "description": "Provide a unique name for this adapter instance. Example: LLM Whisperer 1"
    },
    "url": {
      "type": "string",
      "title": "URL",
      "format": "uri",
      "default": "https://llmwhisperer-api.unstract.com",
      "description": "Provide the URL of the LLM Whisperer service."
    },
    "unstract_key": {
      "type": "string",
      "title": "Unstract Key",
      "format": "password",
      "description": "API key obtained from the Unstract developer portal (https://us-central.unstract.com/llm-whisperer)"
    },
    "mode": {
      "type": "string",
      "title": "Mode",
      "enum": [
        "native_text",
        "low_cost",
        "high_quality",
        "form"
      ],
      "default": "form",
      "description": "Native text : Extract text from native text PDFs. (not scanned). Use this mode when:  You have low latency requirement, All documents are PDFs, PDFs are native text PDFs, Cost sensitive application\n Low cost : Cost effective extraction. Use this mode when:  High quality scanned PDFs,  High quality scanned images, No handwritten documents  \n High quality : High quality extraction. Use this mode when: Medium/low quality scanned PDFs, Medium/low quality scanned images, Handwritten documents \n Form: High quality extraction + Checkbox and Radio button detection. Use this mode when: Checkbox and radio button detection, Medium/low quality scanned PDFs, Medium/low quality scanned images, Handwritten documents."
    },
    "output_mode": {
      "type": "string",
      "title": "Output Mode",
      "enum": [
        "layout_preserving",
        "text"
      ],
      "default": "layout_preserving",
      "description": "The output format. Valid options are layout_preserving and text. Layout preserving mode tries to extract the text from the document as is, maintaining the structural layout of the document. This works very well for LLM consumption. Text (text) mode extracts the text from the document without applying any processing or intelligence. This mode is useful when the layout_preserving mode is not able to extract the text properly. This can happen if the document contains too many different fonts and font sizes."
    },
    "line_splitter_tolerance": {
      "type": "number",
      "title": "Line Splitter Tolerance",
      "default": 0.4,
      "description": "Factor to decide when to move text to the next line when it is above or below the baseline. The default value of 0.4 signifies 40% of the average character height"
    },
    "line_splitter_strategy": {
      "type": "string",
      "title": "Line Splitter Strategy",
      "default":"left-priority",
      "description": "An advanced option for customizing the line splitting process."
    },
    "horizontal_stretch_factor": {
      "type": "number",
      "title": "Horizontal Stretch Factor",
      "default": 1.0,
      "description": "Increase this value to stretch text horizontally, decrease to compress text horizontally. Useful when multi column text merge with each other."
    },
    "pages_to_extract": {
      "type": "string",
      "title": "Page number(s) or range to extract",
      "default": "",
      "pattern": "^(\\s*\\d+-\\d+|\\s*\\d+-|\\s*\\d+|^$)(,\\d+-\\d+|,\\d+-|,\\d+)*$",
      "description": "Specify the range of pages to extract (e.g., 1-5, 7, 10-12, 50-). Leave it empty to extract all pages."
    },
    "page_seperator": {
      "type": "string",
      "title": "Page separator",
      "default": "<<<",
      "description": "Specify a pattern to separate the pages in the document (e.g., <<< {{page_no}} >>>, <<< >>>). This pattern will be inserted at the end of every page. Omit {{page_no}} if you don't want to include the page number in the separator."
    },
    "mark_vertical_lines": {
      "type": "boolean",
      "title": "Mark vertical lines",
      "default": false,
      "description": "States whether to reproduce vertical lines in the document."
    },
    "mark_horizontal_lines": {
      "type": "boolean",
      "title": "Mark horizontal lines",
      "default": false,
      "description": "States whether to reproduce horizontal lines in the document."
    },
    "tag": {
      "type": "string",
      "title": "Tag",
      "default": "default",
      "description": "Auditing feature. Set a value which will be associated with the invocation of the adapter. This can be used for cross referencing in usage reports."
    },
    "use_webhook": {
      "type": "string",
      "title": "Webhook",
      "default": "",
      "description": "The webhook's name which will should be called after the conversion is complete. The name should have been registered earlier using the webhooks management endpoint"
    },
    "webhook_metadata": {
      "type": "string",
      "title": "Webhook Metadata",
      "default": "",
      "description": "Any metadata which should be sent to the webhook. This data is sent verbatim to the callback endpoint."
    }
  },
  "if": {
    "anyOf": [
      {
        "properties": {
          "mode": {
            "const": "low_cost"
          }
        }
      }
    ]
  },
  "then": {
    "properties": {
      "median_filter_size": {
        "type": "integer",
        "title": "Median Filter Size",
        "default": 0,
        "description": "The size of the median filter to use for pre-processing the image during OCR based extraction. Useful to eliminate scanning artifacts and low quality JPEG artifacts. Default is 0 if the value is not explicitly set. Available only in the Enterprise version."
      },
      "gaussian_blur_radius": {
        "type": "number",
        "title": "Gaussian Blur Radius",
        "default": 0.0,
        "description": "The radius of the gaussian blur to use for pre-processing the image during OCR based extraction. Useful to eliminate noise from the image. Default is 0.0 if the value is not explicitly set. Available only in the Enterprise version."
      }
    },
    "required": [
      "median_filter_size",
      "gaussian_blur_radius"
    ]
  }
}
